{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useLayoutEffect, useState } from \"react\";\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport View from \"react-native-web/dist/exports/View\";\nimport { useSelector } from \"react-redux\";\nimport { FontAwesome, Ionicons } from \"@expo/vector-icons\";\nimport logo from \"../../assets/logo.png\";\nimport SafeAreaView from \"react-native-web/dist/exports/SafeAreaView\";\nimport { QuerySnapshot, collection, onSnapshot, orderBy, query } from \"firebase/firestore\";\nimport { firestoreDB } from \"../config/firebase\";\nimport { useNavigation } from \"@react-navigation/native\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nvar HomeScreen = function HomeScreen(props) {\n  var user = useSelector(function (state) {\n    return state.user;\n  });\n  var _useState = useState(true),\n    _useState2 = _slicedToArray(_useState, 2),\n    isLoading = _useState2[0],\n    setIsLoading = _useState2[1];\n  var _useState3 = useState(null),\n    _useState4 = _slicedToArray(_useState3, 2),\n    chats = _useState4[0],\n    setChats = _useState4[1];\n  console.log(\"logged user:\", user);\n  useLayoutEffect(function () {\n    var chatQuery = query(collection(firestoreDB, \"chats\"), orderBy(\"_id\", \"desc\"));\n    var unsubcribe = onSnapshot(chatQuery, function (QuerySnapshot) {\n      var chatRooms = QuerySnapshot.docs.map(function (doc) {\n        return doc.data();\n      });\n      setChats(chatRooms);\n      setIsLoading(false);\n    });\n  }, []);\n  return _jsxs(SafeAreaView, {\n    style: {\n      flex: 1\n    },\n    children: [_jsxs(View, {\n      style: {\n        flexDirection: 'row',\n        alignItems: 'center',\n        backgroundColor: 'green',\n        height: '15%',\n        width: '100%'\n      },\n      children: [_jsx(Image, {\n        source: logo,\n        style: {\n          height: 50,\n          width: 70,\n          top: 20\n        },\n        resizeMode: \"contain\",\n        accessibilityLabel: \"Logo\"\n      }), _jsx(TouchableOpacity, {\n        style: {\n          position: 'absolute',\n          right: 20,\n          top: 50\n        },\n        onPress: function onPress() {\n          return console.log('Profile picture pressed');\n        },\n        children: _jsx(Image, {\n          source: {\n            uri: user.profilePic\n          },\n          resizeMode: \"cover\",\n          style: {\n            width: 50,\n            height: 50,\n            borderRadius: 25,\n            borderWidth: 3,\n            borderColor: '#77AB59'\n          }\n        })\n      })]\n    }), _jsx(ScrollView, {\n      contentContainerStyle: {\n        flexGrow: 1\n      },\n      children: _jsxs(View, {\n        children: [_jsxs(View, {\n          style: {\n            flexDirection: 'row',\n            alignItems: 'center',\n            marginTop: 20,\n            marginLeft: 20\n          },\n          children: [_jsx(Text, {\n            style: {\n              fontWeight: \"bold\",\n              fontSize: 20\n            },\n            children: \"Messages\"\n          }), _jsx(TouchableOpacity, {\n            style: {\n              position: 'absolute',\n              right: 20,\n              top: 0\n            },\n            onPress: function onPress() {\n              return props.navigation.navigate(\"AddToChatScreen\");\n            },\n            children: _jsx(Ionicons, {\n              name: \"chatbox\",\n              size: 28,\n              color: \"#555\"\n            })\n          })]\n        }), isLoading ? _jsx(View, {\n          style: {\n            alignSelf: 'center',\n            marginTop: 20\n          },\n          children: _jsx(ActivityIndicator, {\n            size: \"large\",\n            color: \"#43C651\"\n          })\n        }) : _jsx(_Fragment, {\n          children: chats && (chats == null ? void 0 : chats.length) > 0 ? _jsx(_Fragment, {\n            children: chats == null ? void 0 : chats.map(function (room) {\n              return _jsx(MessageCard, {\n                room: room\n              }, room._id);\n            })\n          }) : _jsx(_Fragment, {})\n        })]\n      })\n    })]\n  });\n};\nvar MessageCard = function MessageCard(_ref) {\n  var room = _ref.room;\n  var navigation = useNavigation();\n  return _jsxs(TouchableOpacity, {\n    onPress: function onPress() {\n      return navigation.navigate(\"ChatScreen\", {\n        room: room\n      });\n    },\n    style: {\n      flexDirection: 'row',\n      alignItems: 'center',\n      justifyContent: 'space-between',\n      padding: 10\n    },\n    children: [_jsx(View, {\n      style: {\n        width: 60,\n        height: 60,\n        borderRadius: 5,\n        marginTop: 10,\n        alignItems: 'center',\n        justifyContent: 'center',\n        borderRadius: 50,\n        borderWidth: 3,\n        borderColor: 'green'\n      },\n      children: _jsx(FontAwesome, {\n        name: \"users\",\n        size: 24,\n        color: \"#555\"\n      })\n    }), _jsxs(View, {\n      style: {\n        marginLeft: 10,\n        flex: 1\n      },\n      children: [_jsx(Text, {\n        style: {\n          fontWeight: 'bold',\n          marginBottom: 5\n        },\n        children: room.ChatName\n      }), _jsx(Text, {\n        style: {\n          marginRight: 20\n        },\n        children: \"Lorem is the message that is displaying. Lorem ipsum dolor sit amet, consectetur.....\"\n      })]\n    }), _jsx(Text, {\n      style: {\n        color: 'green',\n        fontWeight: 'bold'\n      },\n      children: \"25 min\"\n    })]\n  });\n};\nexport default HomeScreen;","map":{"version":3,"names":["React","useLayoutEffect","useState","ActivityIndicator","Image","ScrollView","Text","TouchableOpacity","View","useSelector","FontAwesome","Ionicons","logo","SafeAreaView","QuerySnapshot","collection","onSnapshot","orderBy","query","firestoreDB","useNavigation","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","HomeScreen","props","user","state","_useState","_useState2","_slicedToArray","isLoading","setIsLoading","_useState3","_useState4","chats","setChats","console","log","chatQuery","unsubcribe","chatRooms","docs","map","doc","data","style","flex","children","flexDirection","alignItems","backgroundColor","height","width","source","top","resizeMode","accessibilityLabel","position","right","onPress","uri","profilePic","borderRadius","borderWidth","borderColor","contentContainerStyle","flexGrow","marginTop","marginLeft","fontWeight","fontSize","navigation","navigate","name","size","color","alignSelf","length","room","MessageCard","_id","_ref","justifyContent","padding","marginBottom","ChatName","marginRight"],"sources":["C:/Users/786/Desktop/Chat-App/my-app/src/Screen/HomeScreen.js"],"sourcesContent":["import React, { useLayoutEffect, useState } from \"react\";\r\nimport { ActivityIndicator, Image, ScrollView, Text, TouchableOpacity, View } from \"react-native\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { FontAwesome, Ionicons } from \"@expo/vector-icons\";\r\nimport logo from '../../assets/logo.png';\r\nimport { SafeAreaView } from \"react-native\";\r\nimport { QuerySnapshot, collection, onSnapshot, orderBy, query } from \"firebase/firestore\";\r\nimport { firestoreDB } from \"../config/firebase\";\r\nimport { useNavigation } from \"@react-navigation/native\";\r\n\r\nconst HomeScreen = (props) => {\r\n    const user = useSelector((state) => state.user);\r\n    const [isLoading, setIsLoading] = useState(true);\r\n    const[chats,setChats]=useState(null)\r\n    console.log(\"logged user:\", user);\r\n    useLayoutEffect(()=>{\r\n        const chatQuery=query(collection(firestoreDB,\"chats\"),orderBy(\"_id\",\"desc\"))\r\n        const unsubcribe=onSnapshot(chatQuery,(QuerySnapshot)=>{\r\n            const chatRooms=QuerySnapshot.docs.map(doc=>doc.data())\r\n            setChats(chatRooms)\r\n            setIsLoading(false)\r\n        })\r\n    },[])\r\n    return (\r\n        <SafeAreaView style={{ flex: 1 }}>\r\n            <View style={{ flexDirection: 'row', alignItems: 'center',backgroundColor:'green',height:'15%',width:'100%' }}>\r\n                <Image \r\n                    source={logo} \r\n                    style={{ height: 50, width: 70,top:20 }} \r\n                    resizeMode=\"contain\"\r\n                    accessibilityLabel=\"Logo\" \r\n                />\r\n              <TouchableOpacity style={{ position: 'absolute', right: 20, top: 50 }} onPress={() => console.log('Profile picture pressed')}>\r\n    <Image \r\n        source={{ uri: user.profilePic }} \r\n        resizeMode=\"cover\"  \r\n        style={{ width: 50, height: 50, borderRadius: 25, borderWidth: 3, borderColor: '#77AB59' }} \r\n    />\r\n</TouchableOpacity>\r\n\r\n            </View>\r\n            <ScrollView contentContainerStyle={{ flexGrow: 1 }}>\r\n                <View>\r\n                    <View style={{ flexDirection: 'row', alignItems: 'center', marginTop: 20, marginLeft: 20 }}>\r\n                        <Text style={{ fontWeight: \"bold\", fontSize: 20 }}>Messages</Text>\r\n                        <TouchableOpacity style={{ position: 'absolute', right: 20, top: 0 }} onPress={() => props.navigation.navigate(\"AddToChatScreen\")}>\r\n    <Ionicons name=\"chatbox\" size={28} color=\"#555\" />\r\n</TouchableOpacity>\r\n\r\n                    </View>\r\n                    {/* Conditional rendering of loading indicator */}\r\n                    {isLoading ? (\r\n                        <View style={{ alignSelf: 'center', marginTop: 20 }}>\r\n                            <ActivityIndicator size=\"large\" color=\"#43C651\" />\r\n                        </View>\r\n                    ) : (\r\n                        <>\r\n                       {chats && chats?.length > 0 ? (\r\n    <>\r\n        {chats?.map(room => (\r\n            <MessageCard key={room._id} room={room} /> \r\n        ))}\r\n    </>\r\n) : (\r\n    <></>\r\n)}\r\n\r\n                        </>\r\n                    )}\r\n                </View>\r\n            </ScrollView>\r\n        </SafeAreaView>\r\n    );\r\n};\r\n\r\nconst MessageCard = ({ room }) => { // Destructure room from props\r\n    const navigation=useNavigation()\r\n    return (\r\n        <TouchableOpacity onPress={()=>navigation.navigate(\"ChatScreen\",{room:room})} style={{ flexDirection: 'row', alignItems: 'center', justifyContent: 'space-between', padding: 10 }}>\r\n            {/* image of user */}\r\n            <View style={{\r\n                width: 60,\r\n                height: 60,\r\n                borderRadius: 5,\r\n                marginTop: 10,\r\n                alignItems: 'center',\r\n                justifyContent: 'center',\r\n                borderRadius: 50,\r\n                borderWidth: 3,\r\n                borderColor: 'green',\r\n            }}>\r\n                <FontAwesome name=\"users\" size={24} color=\"#555\" />\r\n            </View>\r\n            {/* content */}\r\n            <View style={{ marginLeft: 10, flex: 1 }}>\r\n                <Text style={{ fontWeight: 'bold', marginBottom: 5 }}>{room.ChatName}</Text>\r\n                <Text style={{ marginRight: 20 }}>Lorem is the message that is displaying. Lorem ipsum dolor sit amet, consectetur.....</Text>\r\n            </View>\r\n            {/* time of message */}\r\n            <Text style={{ color: 'green', fontWeight: 'bold' }}>25 min</Text>\r\n        </TouchableOpacity>\r\n    );\r\n};\r\n\r\nexport default HomeScreen;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}